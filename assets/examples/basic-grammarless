JSpec.describe('ShoppingCart', function(){
  before_each(function(){
    cart = new ShoppingCart
  })
  
  describe('addProduct', function(){
    it('should add a product', function(){
      cart.addProduct('cookie')
      cart.addProduct('icecream')
      cart.should.have 2, 'products'
    })
  })

  describe('addProducts', function(){
    it('should add several products', function(){
      cart.should.receive('addProduct', 'twice').with_args(an_instance_of(String))
      cart.addProducts('cookie', 'icecream')
    })
  })

  describe('checkout', function(){
    it('throw an error when checking out with no products', function(){
      -{ cart.clear().checkout() }.should.throw_error CheckoutError, 'No products'
    })
  })
})